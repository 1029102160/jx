{"remainingRequest":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\babel-loader\\lib\\index.js??ref--16-2!C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\ShoppingCart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\ShoppingCart.vue","mtime":1562006118653},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1557153102750},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\babel-loader\\lib\\index.js","mtime":1557153093181},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js","mtime":1557153103023}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u91D1\\u9F99\\\\WebstormProjects\\\\jx\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"C:\\\\Users\\\\\\u91D1\\u9F99\\\\WebstormProjects\\\\jx\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Navbar from \"@/components/Navbar\";\nimport { mapGetters, mapActions } from \"vuex\";\nexport default {\n  name: \"ShoppingCart\",\n  data: function data() {\n    return {\n      allCheck: false,\n      price: 0,\n      totalPrice: 0\n    };\n  },\n  computed: _objectSpread({}, mapGetters([\"curCartData\"])),\n  components: {\n    Navbar: Navbar\n  },\n  methods: _objectSpread({\n    scrollTo: function scrollTo() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        // reset better-scroll'postion\n        _this2.$refs.scroll.scrollTo(0, 0); // you need to caculate scroll-content height when your dom has changed in nextTick\n\n\n        _this2.$refs.scroll.refresh();\n      });\n    }\n  }, mapActions([\"reduceCartData\", \"addCartData\", \"clearCartData\", \"resetCartData\"]), {\n    handleReduceCartData: function () {\n      var _handleReduceCartData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(item) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.reduceCartData(item);\n\n              case 2:\n                this.handleTotalPrice();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleReduceCartData(_x) {\n        return _handleReduceCartData.apply(this, arguments);\n      }\n\n      return handleReduceCartData;\n    }(),\n    handleAddCartData: function () {\n      var _handleAddCartData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(item) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.addCartData(item);\n\n              case 2:\n                this.handleTotalPrice();\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleAddCartData(_x2) {\n        return _handleAddCartData.apply(this, arguments);\n      }\n\n      return handleAddCartData;\n    }(),\n    handleClearCartData: function () {\n      var _handleClearCartData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(item) {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.clearCartData(item);\n\n              case 2:\n                this.handleTotalPrice();\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function handleClearCartData(_x3) {\n        return _handleClearCartData.apply(this, arguments);\n      }\n\n      return handleClearCartData;\n    }(),\n    handleResetCartData: function () {\n      var _handleResetCartData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(item) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.resetCartData(item);\n\n              case 2:\n                this.handleTotalPrice();\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function handleResetCartData(_x4) {\n        return _handleResetCartData.apply(this, arguments);\n      }\n\n      return handleResetCartData;\n    }(),\n    pay: function pay() {\n      var _this3 = this;\n\n      this.$createDialog({\n        type: \"confirm\",\n        icon: \"cubeic-alert\",\n        title: \"确认支付？\",\n        content: \"\",\n        confirmBtn: {\n          text: \"确定按钮\",\n          active: true,\n          disabled: false,\n          href: \"javascript:;\"\n        },\n        cancelBtn: {\n          text: \"取消按钮\",\n          active: false,\n          disabled: false,\n          href: \"javascript:;\"\n        },\n        onConfirm: function onConfirm() {\n          _this3.$createToast({\n            type: \"warn\",\n            time: 1000,\n            txt: \"支付成功！\"\n          }).show();\n\n          _this3.handlePay();\n        },\n        onCancel: function onCancel() {\n          _this3.$createToast({\n            type: \"warn\",\n            time: 1000,\n            txt: \"取消支付！\"\n          }).show();\n        }\n      }).show();\n    },\n    clear: function clear() {\n      var _this4 = this;\n\n      this.$createDialog({\n        type: \"confirm\",\n        icon: \"cubeic-alert\",\n        title: \"确定清空购物车？\",\n        content: \"\",\n        confirmBtn: {\n          text: \"确定按钮\",\n          active: true,\n          disabled: false,\n          href: \"javascript:;\"\n        },\n        cancelBtn: {\n          text: \"取消按钮\",\n          active: false,\n          disabled: false,\n          href: \"javascript:;\"\n        },\n        onConfirm: function onConfirm() {\n          _this4.$createToast({\n            type: \"warn\",\n            time: 1000,\n            txt: \"购物车已清空！\"\n          }).show();\n\n          _this4.handleClearCartData();\n        },\n        onCancel: function onCancel() {\n          _this4.$createToast({\n            type: \"warn\",\n            time: 1000,\n            txt: \"取消清空！\"\n          }).show();\n        }\n      }).show();\n    },\n    throttle: function throttle(item) {\n      var status = true;\n\n      var _this = this;\n\n      if (status) {\n        status = false;\n        setTimeout(function () {\n          _this.handleResetCartData(item);\n\n          status = true;\n        }, 200);\n      }\n    },\n    handleTotalPrice: function handleTotalPrice() {\n      var startPrice = 0;\n      var inputs = this.$refs.cartUl.getElementsByClassName(\"input-checkbox\");\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = inputs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var input = _step.value;\n\n          if (input.checked) {\n            startPrice += parseFloat(input.parentNode.parentNode.parentNode.querySelectorAll(\".singlePrice\")[0].innerText);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.totalPrice = startPrice.toFixed(2);\n    },\n    handleAllCheck: function handleAllCheck() {\n      var inputs = this.$refs.cartUl.getElementsByClassName(\"input-checkbox\");\n\n      if (this.$refs.allCheck.checked) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = inputs[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var input = _step2.value;\n            input.checked = true;\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      } else {\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = inputs[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var _input = _step3.value;\n            _input.checked = false;\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      }\n\n      this.handleTotalPrice();\n    },\n    handlePay: function handlePay() {\n      var inputs = this.$refs.cartUl.querySelectorAll(\".input-checkbox\");\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = inputs[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var input = _step4.value;\n\n          if (input.checked) {\n            var name = input.parentNode.querySelectorAll(\".goodsName\")[0].innerText;\n            var item = {};\n            item.name = name;\n            item.pay = true;\n            this.handleReduceCartData(item);\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = inputs[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var _input2 = _step5.value;\n          _input2.checked = false;\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n    }\n  }),\n  mounted: function mounted() {},\n  deactivated: function deactivated() {\n    this.scrollTo();\n  },\n  activated: function activated() {\n    this.scrollTo();\n  }\n};",{"version":3,"sources":["ShoppingCart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"shoppingCart-container\">\r\n    <div class=\"cart\">\r\n      <cube-scroll ref=\"scroll\">\r\n        <ul class=\"cart-ul\" ref=\"cartUl\">\r\n          <li class=\"cart-li\" v-for=\"(item, index) of curCartData\" :key=\"index\">\r\n            <div class=\"cart-li-list\">\r\n              <div class=\"list-top\">\r\n                <div class=\"list-left\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    class=\"input-checkbox\"\r\n                    @change=\"handleTotalPrice\"\r\n                  />\r\n                  <div class=\"list-left-bar\">\r\n                    <img :src=\"item.img\" class=\"list-left-img\" />\r\n                    <span class=\"goodsName\">{{ item.name }}</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"list-right\">\r\n                  <span @click=\"handleReduceCartData(item)\" class=\"reduce\"\r\n                    >-</span\r\n                  >\r\n                  <input\r\n                    class=\"reset\"\r\n                    type=\"text\"\r\n                    v-model.trim.number.lazy=\"item.count\"\r\n                    @blur=\"throttle(item)\"\r\n                  />\r\n                  <span @click=\"handleAddCartData(item)\" class=\"add\">+</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"list-bottom\">\r\n                <span class=\"price-count\"\r\n                  ><span class=\"price-count-item\">￥</span>{{ item.price }} ×\r\n                  {{ item.count }} =&nbsp;&nbsp;</span\r\n                >\r\n                <span\r\n                  v-text=\"(item.price * item.count).toFixed(2)\"\r\n                  class=\"singlePrice\"\r\n                ></span>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </cube-scroll>\r\n    </div>\r\n    <footer>\r\n      <div class=\"allChecked\">\r\n        <div class=\"allChecked-left\">\r\n          <span class=\"allChecked-left-name\">全选</span>\r\n          <input\r\n            type=\"checkbox\"\r\n            @change=\"handleAllCheck\"\r\n            ref=\"allCheck\"\r\n            class=\"allCheck\"\r\n          />\r\n        </div>\r\n        <div class=\"allChecked-right\">\r\n          <span class=\"total\">合计：</span>{{ totalPrice }}\r\n        </div>\r\n      </div>\r\n      <div class=\"clearAndPay\">\r\n        <cube-button class=\"clearCartData\" @click=\"clear\"\r\n          >清空购物车</cube-button\r\n        >\r\n        <cube-button @click=\"pay\" class=\"pay\">支付</cube-button>\r\n      </div>\r\n    </footer>\r\n    <navbar></navbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from \"@/components/Navbar\";\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"ShoppingCart\",\r\n  data() {\r\n    return {\r\n      allCheck: false,\r\n      price: 0,\r\n      totalPrice: 0\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"curCartData\"])\r\n  },\r\n  components: {\r\n    Navbar\r\n  },\r\n  methods: {\r\n    scrollTo() {\r\n      this.$nextTick(() => {\r\n        // reset better-scroll'postion\r\n        this.$refs.scroll.scrollTo(0, 0);\r\n        // you need to caculate scroll-content height when your dom has changed in nextTick\r\n        this.$refs.scroll.refresh();\r\n      });\r\n    },\r\n    ...mapActions([\r\n      \"reduceCartData\",\r\n      \"addCartData\",\r\n      \"clearCartData\",\r\n      \"resetCartData\"\r\n    ]),\r\n    async handleReduceCartData(item) {\r\n      await this.reduceCartData(item);\r\n      this.handleTotalPrice();\r\n    },\r\n    async handleAddCartData(item) {\r\n      await this.addCartData(item);\r\n      this.handleTotalPrice();\r\n    },\r\n    async handleClearCartData(item) {\r\n      await this.clearCartData(item);\r\n      this.handleTotalPrice();\r\n    },\r\n    async handleResetCartData(item) {\r\n      await this.resetCartData(item);\r\n      this.handleTotalPrice();\r\n    },\r\n    pay() {\r\n      this.$createDialog({\r\n        type: \"confirm\",\r\n        icon: \"cubeic-alert\",\r\n        title: \"确认支付？\",\r\n        content: \"\",\r\n        confirmBtn: {\r\n          text: \"确定按钮\",\r\n          active: true,\r\n          disabled: false,\r\n          href: \"javascript:;\"\r\n        },\r\n        cancelBtn: {\r\n          text: \"取消按钮\",\r\n          active: false,\r\n          disabled: false,\r\n          href: \"javascript:;\"\r\n        },\r\n        onConfirm: () => {\r\n          this.$createToast({\r\n            type: \"warn\",\r\n            time: 1000,\r\n            txt: \"支付成功！\"\r\n          }).show();\r\n          this.handlePay();\r\n        },\r\n        onCancel: () => {\r\n          this.$createToast({\r\n            type: \"warn\",\r\n            time: 1000,\r\n            txt: \"取消支付！\"\r\n          }).show();\r\n        }\r\n      }).show();\r\n    },\r\n    clear() {\r\n      this.$createDialog({\r\n        type: \"confirm\",\r\n        icon: \"cubeic-alert\",\r\n        title: \"确定清空购物车？\",\r\n        content: \"\",\r\n        confirmBtn: {\r\n          text: \"确定按钮\",\r\n          active: true,\r\n          disabled: false,\r\n          href: \"javascript:;\"\r\n        },\r\n        cancelBtn: {\r\n          text: \"取消按钮\",\r\n          active: false,\r\n          disabled: false,\r\n          href: \"javascript:;\"\r\n        },\r\n        onConfirm: () => {\r\n          this.$createToast({\r\n            type: \"warn\",\r\n            time: 1000,\r\n            txt: \"购物车已清空！\"\r\n          }).show();\r\n          this.handleClearCartData();\r\n        },\r\n        onCancel: () => {\r\n          this.$createToast({\r\n            type: \"warn\",\r\n            time: 1000,\r\n            txt: \"取消清空！\"\r\n          }).show();\r\n        }\r\n      }).show();\r\n    },\r\n    throttle(item) {\r\n      let status = true;\r\n      let _this = this;\r\n      if (status) {\r\n        status = false;\r\n        setTimeout(function() {\r\n          _this.handleResetCartData(item);\r\n          status = true;\r\n        }, 200);\r\n      }\r\n    },\r\n    handleTotalPrice() {\r\n      let startPrice = 0;\r\n      let inputs = this.$refs.cartUl.getElementsByClassName(\"input-checkbox\");\r\n      for (let input of inputs) {\r\n        if (input.checked) {\r\n          startPrice += parseFloat(\r\n            input.parentNode.parentNode.parentNode.querySelectorAll(\r\n              \".singlePrice\"\r\n            )[0].innerText\r\n          );\r\n        }\r\n      }\r\n      this.totalPrice = startPrice.toFixed(2);\r\n    },\r\n    handleAllCheck() {\r\n      let inputs = this.$refs.cartUl.getElementsByClassName(\"input-checkbox\");\r\n      if (this.$refs.allCheck.checked) {\r\n        for (let input of inputs) {\r\n          input.checked = true;\r\n        }\r\n      } else {\r\n        for (let input of inputs) {\r\n          input.checked = false;\r\n        }\r\n      }\r\n      this.handleTotalPrice();\r\n    },\r\n    handlePay() {\r\n      let inputs = this.$refs.cartUl.querySelectorAll(\".input-checkbox\");\r\n      for (let input of inputs) {\r\n        if (input.checked) {\r\n          let name = input.parentNode.querySelectorAll(\".goodsName\")[0]\r\n            .innerText;\r\n          let item = {};\r\n          item.name = name;\r\n          item.pay = true;\r\n          this.handleReduceCartData(item);\r\n        }\r\n      }\r\n\r\n      for (let input of inputs) {\r\n        input.checked = false;\r\n      }\r\n    }\r\n  },\r\n  mounted() {},\r\n  deactivated() {\r\n    this.scrollTo();\r\n  },\r\n  activated() {\r\n    this.scrollTo();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.cart\r\n  height 60vh\r\n  .cart-ul\r\n    .cart-li\r\n      padding 10px\r\n      .cart-li-list\r\n        .list-top\r\n          width 100%\r\n          display flex\r\n          align-items center\r\n          justify-content space-between\r\n          .list-left\r\n            display flex\r\n            align-items center\r\n            .input-checkbox\r\n              zoom: 180%\r\n              margin 0 10px 0 0\r\n            .list-left-bar\r\n              display flex\r\n              justify-content center\r\n              align-items center\r\n              flex-direction column\r\n              .list-left-img\r\n                width 100px\r\n                height 100px\r\n              .goodsName\r\n                text-align center\r\n                font-size 14px\r\n                padding 10px\r\n                box-sizing border-box\r\n                width 100px\r\n                overflow: hidden;\r\n                text-overflow: ellipsis;\r\n                white-space:nowrap;\r\n          .list-right\r\n             display flex\r\n             justify-content center\r\n             align-items center\r\n             .reduce, .add\r\n              text-align center\r\n              font-size 30px\r\n              padding 10px 20px\r\n             .reset\r\n              font-size 14px\r\n              width 30px\r\n              border 1px solid black\r\n              border-radius initial\r\n              padding 10px 2px\r\n              text-align center\r\n              outline none\r\n              -webkit-appearance none\r\n        .list-bottom\r\n          display flex\r\n          align-items center\r\n          padding 0 0 10px 0\r\n          margin-left 40px\r\n          .price-count\r\n            font-size 14px\r\n            .price-count-item\r\n              font-size 16px\r\n          .singlePrice\r\n            font-size 16px\r\nfooter\r\n  position fixed\r\n  left 0\r\n  bottom 55px\r\n  .allChecked\r\n    width 100vw\r\n    min-height 40px\r\n    display flex\r\n    justify-content space-between\r\n    align-items center\r\n    .allChecked-left\r\n      display flex\r\n      align-items center\r\n      .allChecked-left-name\r\n        font-size 14px\r\n        padding 10px\r\n      .allCheck\r\n        zoom 180%\r\n    .allChecked-right\r\n      margin-right 20px\r\n      font-size 14px\r\n      .total\r\n        font-size 16px\r\n  .clearAndPay\r\n    display flex\r\n    justify-content space-between\r\n    align-items center\r\n    padding 10px 20px\r\n    .clearCartData, .pay\r\n      width 30vw\r\n      justify-content center\r\n      align-items center\r\n      background orange\r\n      font-size 14px\r\n</style>\r\n"],"sourceRoot":"src/views"}]}