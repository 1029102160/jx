{"remainingRequest":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\babel-loader\\lib\\index.js??ref--16-1!C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\SignIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\SignIn.vue","mtime":1561933921796},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\babel-loader\\lib\\index.js","mtime":1557153093181},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js","mtime":1557153103023}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u91D1\\u9F99\\\\WebstormProjects\\\\jx\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"SignIn\",\n  data: function data() {\n    return {\n      model: {\n        username: \"\",\n        password: \"\"\n      },\n      schema: {\n        fields: [{\n          type: \"input\",\n          modelKey: \"username\",\n          label: \"用户名\",\n          props: {\n            placeholder: \"请输入用户名\",\n            type: \"username\"\n          },\n          rules: {\n            required: true,\n            type: \"string\",\n            min: 3,\n            max: 15\n          },\n          trigger: \"blur\",\n          messages: {\n            required: \"用户名不能为空!\",\n            min: \"用户名不能少于3个字符！\",\n            max: \"用户名不能大于15个字符！\"\n          }\n        }, {\n          type: \"input\",\n          modelKey: \"password\",\n          label: \"密码\",\n          props: {\n            placeholder: \"请输入密码\",\n            type: \"password\",\n            eye: {\n              open: false\n            }\n          },\n          rules: {\n            required: true,\n            type: \"string\",\n            min: 3,\n            max: 15\n          },\n          trigger: \"blur\",\n          messages: {\n            required: \"密码不能为空\",\n            min: \"密码不能少于3个字符\",\n            max: \"密码不能大于15个字符\"\n          }\n        }, {\n          type: \"submit\",\n          label: \"登陆\"\n        }]\n      }\n    };\n  },\n  methods: {\n    submitHandler: function () {\n      var _submitHandler = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(e) {\n        var result, token;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.prev = 1;\n                _context.next = 4;\n                return this.axios({\n                  method: \"get\",\n                  url: \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/signin\",\n                  params: this.model\n                });\n\n              case 4:\n                result = _context.sent;\n\n                if (result.data.data.signIn.code === 2) {\n                  token = result.data.data.signIn.token;\n                  this.$store.dispatch({\n                    type: \"setTokenAction\",\n                    token: token\n                  });\n                  this.$router.push(\"/my\"); //判断路由是否带参数，如果带参，跳到带参的路由\n\n                  /*          if (this.$route.query.redirect) {\r\n                    this.$router.replace(`${this.$route.query.redirect}`);\r\n                  } else {\r\n                    this.$router.replace(\"/\");\r\n                  }*/\n                } else if (result.data.data.signIn.code === 1) {\n                  this.showPop(\"passwordMistake\");\n                } else if (result.data.data.signIn.code === 0) {\n                  this.showPop(\"usernameMistake\");\n                }\n\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                alert(_context.t0);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 8]]);\n      }));\n\n      function submitHandler(_x) {\n        return _submitHandler.apply(this, arguments);\n      }\n\n      return submitHandler;\n    }(),\n    showPop: function showPop(refId) {\n      var component = this.$refs[refId];\n      component.show();\n      setTimeout(function () {\n        component.hide();\n      }, 1000);\n    }\n  }\n};",{"version":3,"sources":["SignIn.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <h6 class=\"signIn\">登录</h6>\r\n    <cube-form\r\n      :model=\"model\"\r\n      :schema=\"schema\"\r\n      @submit=\"submitHandler\"\r\n    ></cube-form>\r\n    <div class=\"signUp\">\r\n      <router-link class=\"noSignUp\" to=\"/signup\" tag=\"a\"\r\n        >还未注册？</router-link\r\n      >\r\n    </div>\r\n    <cube-popup type=\"passwordMistake\" :mask=\"false\" ref=\"passwordMistake\">\r\n      密码错误！\r\n    </cube-popup>\r\n    <cube-popup type=\"usernameMistake\" :mask=\"false\" ref=\"usernameMistake\">\r\n      用户名不存在！\r\n    </cube-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SignIn\",\r\n  data() {\r\n    return {\r\n      model: {\r\n        username: \"\",\r\n        password: \"\"\r\n      },\r\n      schema: {\r\n        fields: [\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"username\",\r\n            label: \"用户名\",\r\n            props: {\r\n              placeholder: \"请输入用户名\",\r\n              type: \"username\"\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"用户名不能为空!\",\r\n              min: \"用户名不能少于3个字符！\",\r\n              max: \"用户名不能大于15个字符！\"\r\n            }\r\n          },\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"password\",\r\n            label: \"密码\",\r\n            props: {\r\n              placeholder: \"请输入密码\",\r\n              type: \"password\",\r\n              eye: {\r\n                open: false\r\n              }\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"密码不能为空\",\r\n              min: \"密码不能少于3个字符\",\r\n              max: \"密码不能大于15个字符\"\r\n            }\r\n          },\r\n          {\r\n            type: \"submit\",\r\n            label: \"登陆\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    async submitHandler(e) {\r\n      e.preventDefault();\r\n      try {\r\n        let result = await this.axios({\r\n          method: \"get\",\r\n          url:\r\n            \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/signin\",\r\n          params: this.model\r\n        });\r\n        if (result.data.data.signIn.code === 2) {\r\n          let token = result.data.data.signIn.token;\r\n          this.$store.dispatch({\r\n            type: \"setTokenAction\",\r\n            token: token\r\n          });\r\n          this.$router.push(\"/my\");\r\n\r\n          //判断路由是否带参数，如果带参，跳到带参的路由\r\n          /*          if (this.$route.query.redirect) {\r\n            this.$router.replace(`${this.$route.query.redirect}`);\r\n          } else {\r\n            this.$router.replace(\"/\");\r\n          }*/\r\n        } else if (result.data.data.signIn.code === 1) {\r\n          this.showPop(\"passwordMistake\");\r\n        } else if (result.data.data.signIn.code === 0) {\r\n          this.showPop(\"usernameMistake\");\r\n        }\r\n      } catch (err) {\r\n        alert(err);\r\n      }\r\n    },\r\n    showPop(refId) {\r\n      const component = this.$refs[refId];\r\n      component.show();\r\n      setTimeout(() => {\r\n        component.hide();\r\n      }, 1000);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n>>> .cube-btn\r\n  background orange\r\n>>> .cube-popup-content\r\n  padding 20px\r\n  color #fff\r\n  font-size 24px\r\n  background-color rgba(0,0,0,.8)\r\n.signIn\r\n  font-size 20px\r\n  display flex\r\n  justify-content center\r\n  align-items center\r\n  color orange\r\n  background #f8f8f8\r\n  padding 10px\r\n.cube-form\r\n  margin-top 15px\r\n.signUp\r\n  display flex\r\n  width 100%\r\n  margin-top 10px\r\n  .noSignUp\r\n    margin-left 15px\r\n    font-size 12px\r\n    text-decoration underline\r\n</style>\r\n"],"sourceRoot":"src/views"}]}