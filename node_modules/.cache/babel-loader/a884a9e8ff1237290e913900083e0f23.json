{"remainingRequest":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\babel-loader\\lib\\index.js??ref--16-2!C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\Categories.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\Categories.vue","mtime":1562007200188},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1557153102750},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\babel-loader\\lib\\index.js","mtime":1557153093181},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js","mtime":1557153103023}],"contextDependencies":[],"result":["import _typeof from \"C:\\\\Users\\\\\\u91D1\\u9F99\\\\WebstormProjects\\\\jx\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/typeof\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"C:\\\\Users\\\\\\u91D1\\u9F99\\\\WebstormProjects\\\\jx\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Navbar from \"@/components/Navbar\";\nimport { mapState, mapActions } from \"vuex\";\nexport default {\n  name: \"Categories\",\n  data: function data() {\n    return {\n      categories: [],\n      selectedLabelDefault: \"热门推荐\",\n      activeCategories: {},\n      balls: [{\n        show: false\n      }, {\n        show: false\n      }, {\n        show: false\n      }, {\n        show: false\n      }, {\n        show: false\n      }]\n    };\n  },\n  computed: _objectSpread({}, mapState([\"shopCartPosition\"])),\n  components: {\n    Navbar: Navbar\n  },\n  created: function created() {\n    var _this2 = this;\n\n    //获取分类页数据\n    this.axios({\n      method: \"get\",\n      url: \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/categories\"\n    }).then(function (res) {\n      if (res.data.success) {\n        _this2.categories = res.data.data;\n        console.log(res.data.data);\n        _this2.activeCategories = _this2.categories[0];\n      } else {\n        console.log(\"请求数据失败，请重新请求！\");\n      }\n    });\n  },\n  methods: _objectSpread({}, mapActions([\"addCartData\", \"handleOnceRequest\"]), {\n    clickHandler: function clickHandler(label) {\n      // if you clicked home tab, then print 'Home'\n      console.log(label);\n    },\n    changeHandler: function changeHandler(label) {\n      this.loadImg(); // if you clicked different tab, this methods can be emitted\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.categories[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var i = _step.value;\n\n          if (label === i.name) {\n            this.activeCategories = i;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    },\n    handleAddCartData: function handleAddCartData(e) {\n      this.loadImg(); //获取被点击的dom元素位置,小球动画开始\n\n      var el = e.target;\n\n      if (el.className === \"cubeic-add\") {\n        this.ballAnimation(el);\n        var name = el.getAttribute(\"name\");\n        var imgUrl = el.getAttribute(\"imgUrl\");\n        var price = el.getAttribute(\"price\");\n        this.addCartData({\n          name: name,\n          img: imgUrl,\n          count: 1,\n          price: price\n        });\n      }\n    },\n    loadImg: function loadImg() {\n      // reset better-scroll'postion\n      this.$refs.scroll.scrollTo(0, 0); // you need to caculate scroll-content height when your dom has changed in nextTick\n\n      this.$refs.scroll.refresh();\n    },\n    ballAnimation: function ballAnimation(el) {\n      //获取小球起点终点\n      var _el$getBoundingClient = el.getBoundingClientRect(),\n          top = _el$getBoundingClient.top,\n          left = _el$getBoundingClient.left;\n\n      var endTop = this.shopCartPosition.top - top,\n          endLeft = this.shopCartPosition.left - left + 40;\n\n      var _this = this; //遍历小球\n\n\n      this.$nextTick(function () {\n        var _this3 = this;\n\n        var _loop = function _loop(i) {\n          if (!_this3.balls[i].show) {\n            //将小球放到起点位置\n            _this3.balls[i].show = true;\n            _this3.$refs.balls[i].style.top = top + \"px\";\n            _this3.$refs.balls[i].style.left = left + \"px\"; //小球移动到终点位置\n\n            setTimeout(function () {\n              _this.$refs.balls[i].style.transform = \"translate3d(\".concat(endLeft, \"px, \").concat(endTop, \"px, 0)\");\n              setTimeout(function () {\n                _this.balls[i].show = false; //小球回到起点位置\n\n                _this.$refs.balls[i].style.transform = \"translate3d(0, 0, 0)\";\n              }, 600);\n            });\n            return {\n              v: void 0\n            };\n          }\n        };\n\n        for (var i = 0; i < this.balls.length; i++) {\n          var _ret = _loop(i);\n\n          if (_typeof(_ret) === \"object\") return _ret.v;\n        }\n      });\n    }\n  }),\n  activated: function activated() {\n    this.loadImg();\n  }\n};",{"version":3,"sources":["Categories.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA,OAAA,MAAA,MAAA,qBAAA;AACA,SAAA,QAAA,EAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,oBAAA,EAAA,MAFA;AAGA,MAAA,gBAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,CACA;AAAA,QAAA,IAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,IAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,IAAA,EAAA;AAAA,OAHA,EAIA;AAAA,QAAA,IAAA,EAAA;AAAA,OAJA,EAKA;AAAA,QAAA,IAAA,EAAA;AAAA,OALA;AAJA,KAAA;AAYA,GAfA;AAgBA,EAAA,QAAA,oBACA,QAAA,CAAA,CAAA,kBAAA,CAAA,CADA,CAhBA;AAmBA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GAnBA;AAsBA,EAAA,OAtBA,qBAsBA;AAAA;;AACA;AACA,SAAA,KAAA,CAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,GAAA,EACA;AAHA,KAAA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,UAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,QAAA,MAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,gBAAA,GAAA,MAAA,CAAA,UAAA,CAAA,CAAA,CAAA;AACA,OAJA,MAIA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,eAAA;AACA;AACA,KAZA;AAaA,GArCA;AAsCA,EAAA,OAAA,oBACA,UAAA,CAAA,CAAA,aAAA,EAAA,mBAAA,CAAA,CADA;AAEA,IAAA,YAFA,wBAEA,KAFA,EAEA;AACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,KALA;AAMA,IAAA,aANA,yBAMA,KANA,EAMA;AACA,WAAA,OAAA,GADA,CAEA;;AAFA;AAAA;AAAA;;AAAA;AAGA,6BAAA,KAAA,UAAA,8HAAA;AAAA,cAAA,CAAA;;AACA,cAAA,KAAA,KAAA,CAAA,CAAA,IAAA,EAAA;AACA,iBAAA,gBAAA,GAAA,CAAA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KAdA;AAeA,IAAA,iBAfA,6BAeA,CAfA,EAeA;AACA,WAAA,OAAA,GADA,CAEA;;AACA,UAAA,EAAA,GAAA,CAAA,CAAA,MAAA;;AACA,UAAA,EAAA,CAAA,SAAA,KAAA,YAAA,EAAA;AACA,aAAA,aAAA,CAAA,EAAA;AACA,YAAA,IAAA,GAAA,EAAA,CAAA,YAAA,CAAA,MAAA,CAAA;AACA,YAAA,MAAA,GAAA,EAAA,CAAA,YAAA,CAAA,QAAA,CAAA;AACA,YAAA,KAAA,GAAA,EAAA,CAAA,YAAA,CAAA,OAAA,CAAA;AACA,aAAA,WAAA,CAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,GAAA,EAAA,MAFA;AAGA,UAAA,KAAA,EAAA,CAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAAA;AAMA;AACA,KA/BA;AAgCA,IAAA,OAhCA,qBAgCA;AACA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,CAAA,EAAA,CAAA,EAFA,CAGA;;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,OAAA;AACA,KArCA;AAsCA,IAAA,aAtCA,yBAsCA,EAtCA,EAsCA;AACA;AADA,kCAEA,EAAA,CAAA,qBAAA,EAFA;AAAA,UAEA,GAFA,yBAEA,GAFA;AAAA,UAEA,IAFA,yBAEA,IAFA;;AAGA,UAAA,MAAA,GAAA,KAAA,gBAAA,CAAA,GAAA,GAAA,GAAA;AAAA,UACA,OAAA,GAAA,KAAA,gBAAA,CAAA,IAAA,GAAA,IAAA,GAAA,EADA;;AAEA,UAAA,KAAA,GAAA,IAAA,CALA,CAMA;;;AACA,WAAA,SAAA,CAAA,YAAA;AAAA;;AAAA,mCACA,CADA;AAEA,cAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,EAAA;AACA;AACA,YAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,GAAA,IAAA;AACA,YAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,CAAA,GAAA,GAAA,GAAA,GAAA,IAAA;AACA,YAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,CAJA,CAKA;;AACA,YAAA,UAAA,CAAA,YAAA;AACA,cAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CACA,CADA,EAEA,KAFA,CAEA,SAFA,yBAEA,OAFA,iBAEA,MAFA;AAGA,cAAA,UAAA,CAAA,YAAA;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,GAAA,KAAA,CADA,CAEA;;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,CAAA,SAAA;AACA,eAJA,EAIA,GAJA,CAAA;AAKA,aATA,CAAA;AAWA;AAAA;AAAA;AACA;AApBA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,KAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AAAA,2BAAA,CAAA;;AAAA;AAoBA;AACA,OAtBA;AAuBA;AApEA,IAtCA;AA4GA,EAAA,SA5GA,uBA4GA;AACA,SAAA,OAAA;AACA;AA9GA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"categories-container\">\r\n      <div class=\"left-scroll-bar\">\r\n        <cube-scroll class=\"left-scroll\">\r\n          <cube-tab-bar\r\n            v-model=\"selectedLabelDefault\"\r\n            :data=\"categories\"\r\n            @click=\"clickHandler\"\r\n            @change=\"changeHandler\"\r\n          >\r\n            <cube-tab\r\n              v-for=\"(item, index) of categories\"\r\n              :label=\"item.name\"\r\n              :key=\"index\"\r\n            >\r\n              {{ item.name }}\r\n            </cube-tab>\r\n          </cube-tab-bar>\r\n        </cube-scroll>\r\n      </div>\r\n      <div class=\"right-scroll-bar\">\r\n        <cube-scroll class=\"right-scroll\" ref=\"scroll\">\r\n          <ul class=\"right-scroll-ul\" @click=\"handleAddCartData($event)\">\r\n            <li\r\n              class=\"right-scroll-li\"\r\n              v-for=\"(item, index) of activeCategories.data\"\r\n              :key=\"index\"\r\n            >\r\n              <img\r\n                class=\"goodsImg\"\r\n                :src=\"item.imgUrl\"\r\n                alt=\"\"\r\n                @load.once=\"loadImg\"\r\n              />\r\n              <span class=\"goodsName\"\r\n                >{{ item.name }}\r\n                <i\r\n                  class=\"cubeic-add\"\r\n                  :name=\"item.name\"\r\n                  :imgUrl=\"item.imgUrl\"\r\n                  :price=\"item.price\"\r\n                ></i\r\n              ></span>\r\n              <span class=\"goodsPrice\">￥{{ item.price }} </span>\r\n            </li>\r\n          </ul>\r\n        </cube-scroll>\r\n      </div>\r\n    </div>\r\n    <navbar></navbar>\r\n    <div\r\n      class=\"balls\"\r\n      v-for=\"(ball, index) of balls\"\r\n      :key=\"index\"\r\n      ref=\"balls\"\r\n      v-show=\"ball.show\"\r\n    ></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from \"@/components/Navbar\";\r\nimport { mapState, mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"Categories\",\r\n  data() {\r\n    return {\r\n      categories: [],\r\n      selectedLabelDefault: \"热门推荐\",\r\n      activeCategories: {},\r\n      balls: [\r\n        { show: false },\r\n        { show: false },\r\n        { show: false },\r\n        { show: false },\r\n        { show: false }\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"shopCartPosition\"])\r\n  },\r\n  components: {\r\n    Navbar\r\n  },\r\n  created() {\r\n    //获取分类页数据\r\n    this.axios({\r\n      method: \"get\",\r\n      url:\r\n        \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/categories\"\r\n    }).then(res => {\r\n      if (res.data.success) {\r\n        this.categories = res.data.data;\r\n        console.log(res.data.data);\r\n        this.activeCategories = this.categories[0];\r\n      } else {\r\n        console.log(\"请求数据失败，请重新请求！\");\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    ...mapActions([\"addCartData\", \"handleOnceRequest\"]),\r\n    clickHandler(label) {\r\n      // if you clicked home tab, then print 'Home'\r\n      console.log(label);\r\n    },\r\n    changeHandler(label) {\r\n      this.loadImg();\r\n      // if you clicked different tab, this methods can be emitted\r\n      for (let i of this.categories) {\r\n        if (label === i.name) {\r\n          this.activeCategories = i;\r\n        }\r\n      }\r\n    },\r\n    handleAddCartData(e) {\r\n      this.loadImg();\r\n      //获取被点击的dom元素位置,小球动画开始\r\n      const el = e.target;\r\n      if (el.className === \"cubeic-add\") {\r\n        this.ballAnimation(el);\r\n        let name = el.getAttribute(\"name\");\r\n        let imgUrl = el.getAttribute(\"imgUrl\");\r\n        let price = el.getAttribute(\"price\");\r\n        this.addCartData({\r\n          name: name,\r\n          img: imgUrl,\r\n          count: 1,\r\n          price: price\r\n        });\r\n      }\r\n    },\r\n    loadImg() {\r\n      // reset better-scroll'postion\r\n      this.$refs.scroll.scrollTo(0, 0);\r\n      // you need to caculate scroll-content height when your dom has changed in nextTick\r\n      this.$refs.scroll.refresh();\r\n    },\r\n    ballAnimation(el) {\r\n      //获取小球起点终点\r\n      let { top, left } = el.getBoundingClientRect();\r\n      let endTop = this.shopCartPosition.top - top,\r\n        endLeft = this.shopCartPosition.left - left + 40;\r\n      let _this = this;\r\n      //遍历小球\r\n      this.$nextTick(function() {\r\n        for (let i = 0; i < this.balls.length; i++) {\r\n          if (!this.balls[i].show) {\r\n            //将小球放到起点位置\r\n            this.balls[i].show = true;\r\n            this.$refs.balls[i].style.top = top + \"px\";\r\n            this.$refs.balls[i].style.left = left + \"px\";\r\n            //小球移动到终点位置\r\n            setTimeout(function() {\r\n              _this.$refs.balls[\r\n                i\r\n              ].style.transform = `translate3d(${endLeft}px, ${endTop}px, 0)`;\r\n              setTimeout(function() {\r\n                _this.balls[i].show = false;\r\n                //小球回到起点位置\r\n                _this.$refs.balls[i].style.transform = `translate3d(0, 0, 0)`;\r\n              }, 600);\r\n            });\r\n\r\n            return;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  },\r\n  activated() {\r\n    this.loadImg();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.balls\r\n  position absolute\r\n  bottom 20px\r\n  right 35%\r\n  width 20px\r\n  height 20px\r\n  border-radius 50%\r\n  background orange\r\n  z-index 1000\r\n  transition: transform .6s cubic-bezier(0.49, -0.29, 0.75, 0.41)\r\n.categories-container\r\n  display flex\r\n  .right-scroll-bar\r\n    height 80vh\r\n    width 70%\r\n    .right-scroll\r\n      .right-scroll-ul\r\n        display flex\r\n        flex-wrap wrap\r\n        justify-content space-between\r\n        padding 10px 20px\r\n        box-sizing border-box\r\n        .right-scroll-li\r\n          display flex\r\n          flex-direction column\r\n          max-width 45%\r\n          overflow hidden\r\n          margin-bottom 15px\r\n          .goodsImg\r\n            padding-bottom 10px\r\n          .goodsName\r\n            padding-bottom 5px\r\n            padding-left 10px\r\n            font-size 18px\r\n            .cubeic-add\r\n              font-size 22px\r\n              color orange\r\n          .goodsPrice\r\n            font-size 16px\r\n            padding-left 10px\r\n  .left-scroll-bar\r\n    height 80vh\r\n    width 30%\r\n    background-color #f8f8f8\r\n    .left-scroll\r\n      .cube-tab-bar\r\n        display flex\r\n        flex-wrap wrap\r\n        flex-direction column\r\n        .cube-tab\r\n          width 100%\r\n          display flex\r\n          justify-content center\r\n          align-items center\r\n          padding 15px 0\r\n          box-sizing border-box\r\n          font-size 14px\r\n</style>\r\n"],"sourceRoot":"src/views"}]}