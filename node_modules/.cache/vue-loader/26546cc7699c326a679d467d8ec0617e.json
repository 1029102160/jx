{"remainingRequest":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\SignIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\SignIn.vue","mtime":1561933921796},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1557153102750},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\babel-loader\\lib\\index.js","mtime":1557153093181},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js","mtime":1557153103023}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  name: \"SignIn\",\r\n  data() {\r\n    return {\r\n      model: {\r\n        username: \"\",\r\n        password: \"\"\r\n      },\r\n      schema: {\r\n        fields: [\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"username\",\r\n            label: \"用户名\",\r\n            props: {\r\n              placeholder: \"请输入用户名\",\r\n              type: \"username\"\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"用户名不能为空!\",\r\n              min: \"用户名不能少于3个字符！\",\r\n              max: \"用户名不能大于15个字符！\"\r\n            }\r\n          },\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"password\",\r\n            label: \"密码\",\r\n            props: {\r\n              placeholder: \"请输入密码\",\r\n              type: \"password\",\r\n              eye: {\r\n                open: false\r\n              }\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"密码不能为空\",\r\n              min: \"密码不能少于3个字符\",\r\n              max: \"密码不能大于15个字符\"\r\n            }\r\n          },\r\n          {\r\n            type: \"submit\",\r\n            label: \"登陆\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    async submitHandler(e) {\r\n      e.preventDefault();\r\n      try {\r\n        let result = await this.axios({\r\n          method: \"get\",\r\n          url:\r\n            \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/signin\",\r\n          params: this.model\r\n        });\r\n        if (result.data.data.signIn.code === 2) {\r\n          let token = result.data.data.signIn.token;\r\n          this.$store.dispatch({\r\n            type: \"setTokenAction\",\r\n            token: token\r\n          });\r\n          this.$router.push(\"/my\");\r\n\r\n          //判断路由是否带参数，如果带参，跳到带参的路由\r\n          /*          if (this.$route.query.redirect) {\r\n            this.$router.replace(`${this.$route.query.redirect}`);\r\n          } else {\r\n            this.$router.replace(\"/\");\r\n          }*/\r\n        } else if (result.data.data.signIn.code === 1) {\r\n          this.showPop(\"passwordMistake\");\r\n        } else if (result.data.data.signIn.code === 0) {\r\n          this.showPop(\"usernameMistake\");\r\n        }\r\n      } catch (err) {\r\n        alert(err);\r\n      }\r\n    },\r\n    showPop(refId) {\r\n      const component = this.$refs[refId];\r\n      component.show();\r\n      setTimeout(() => {\r\n        component.hide();\r\n      }, 1000);\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["SignIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignIn.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <h6 class=\"signIn\">登录</h6>\r\n    <cube-form\r\n      :model=\"model\"\r\n      :schema=\"schema\"\r\n      @submit=\"submitHandler\"\r\n    ></cube-form>\r\n    <div class=\"signUp\">\r\n      <router-link class=\"noSignUp\" to=\"/signup\" tag=\"a\"\r\n        >还未注册？</router-link\r\n      >\r\n    </div>\r\n    <cube-popup type=\"passwordMistake\" :mask=\"false\" ref=\"passwordMistake\">\r\n      密码错误！\r\n    </cube-popup>\r\n    <cube-popup type=\"usernameMistake\" :mask=\"false\" ref=\"usernameMistake\">\r\n      用户名不存在！\r\n    </cube-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SignIn\",\r\n  data() {\r\n    return {\r\n      model: {\r\n        username: \"\",\r\n        password: \"\"\r\n      },\r\n      schema: {\r\n        fields: [\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"username\",\r\n            label: \"用户名\",\r\n            props: {\r\n              placeholder: \"请输入用户名\",\r\n              type: \"username\"\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"用户名不能为空!\",\r\n              min: \"用户名不能少于3个字符！\",\r\n              max: \"用户名不能大于15个字符！\"\r\n            }\r\n          },\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"password\",\r\n            label: \"密码\",\r\n            props: {\r\n              placeholder: \"请输入密码\",\r\n              type: \"password\",\r\n              eye: {\r\n                open: false\r\n              }\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"密码不能为空\",\r\n              min: \"密码不能少于3个字符\",\r\n              max: \"密码不能大于15个字符\"\r\n            }\r\n          },\r\n          {\r\n            type: \"submit\",\r\n            label: \"登陆\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    async submitHandler(e) {\r\n      e.preventDefault();\r\n      try {\r\n        let result = await this.axios({\r\n          method: \"get\",\r\n          url:\r\n            \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/signin\",\r\n          params: this.model\r\n        });\r\n        if (result.data.data.signIn.code === 2) {\r\n          let token = result.data.data.signIn.token;\r\n          this.$store.dispatch({\r\n            type: \"setTokenAction\",\r\n            token: token\r\n          });\r\n          this.$router.push(\"/my\");\r\n\r\n          //判断路由是否带参数，如果带参，跳到带参的路由\r\n          /*          if (this.$route.query.redirect) {\r\n            this.$router.replace(`${this.$route.query.redirect}`);\r\n          } else {\r\n            this.$router.replace(\"/\");\r\n          }*/\r\n        } else if (result.data.data.signIn.code === 1) {\r\n          this.showPop(\"passwordMistake\");\r\n        } else if (result.data.data.signIn.code === 0) {\r\n          this.showPop(\"usernameMistake\");\r\n        }\r\n      } catch (err) {\r\n        alert(err);\r\n      }\r\n    },\r\n    showPop(refId) {\r\n      const component = this.$refs[refId];\r\n      component.show();\r\n      setTimeout(() => {\r\n        component.hide();\r\n      }, 1000);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n>>> .cube-btn\r\n  background orange\r\n>>> .cube-popup-content\r\n  padding 20px\r\n  color #fff\r\n  font-size 24px\r\n  background-color rgba(0,0,0,.8)\r\n.signIn\r\n  font-size 20px\r\n  display flex\r\n  justify-content center\r\n  align-items center\r\n  color orange\r\n  background #f8f8f8\r\n  padding 10px\r\n.cube-form\r\n  margin-top 15px\r\n.signUp\r\n  display flex\r\n  width 100%\r\n  margin-top 10px\r\n  .noSignUp\r\n    margin-left 15px\r\n    font-size 12px\r\n    text-decoration underline\r\n</style>\r\n"]}]}