{"remainingRequest":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\Categories.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\Categories.vue","mtime":1562007200188},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1557153102750},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\babel-loader\\lib\\index.js","mtime":1557153093181},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js","mtime":1557153103023}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Navbar from \"@/components/Navbar\";\r\nimport { mapState, mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"Categories\",\r\n  data() {\r\n    return {\r\n      categories: [],\r\n      selectedLabelDefault: \"热门推荐\",\r\n      activeCategories: {},\r\n      balls: [\r\n        { show: false },\r\n        { show: false },\r\n        { show: false },\r\n        { show: false },\r\n        { show: false }\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"shopCartPosition\"])\r\n  },\r\n  components: {\r\n    Navbar\r\n  },\r\n  created() {\r\n    //获取分类页数据\r\n    this.axios({\r\n      method: \"get\",\r\n      url:\r\n        \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/categories\"\r\n    }).then(res => {\r\n      if (res.data.success) {\r\n        this.categories = res.data.data;\r\n        console.log(res.data.data);\r\n        this.activeCategories = this.categories[0];\r\n      } else {\r\n        console.log(\"请求数据失败，请重新请求！\");\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    ...mapActions([\"addCartData\", \"handleOnceRequest\"]),\r\n    clickHandler(label) {\r\n      // if you clicked home tab, then print 'Home'\r\n      console.log(label);\r\n    },\r\n    changeHandler(label) {\r\n      this.loadImg();\r\n      // if you clicked different tab, this methods can be emitted\r\n      for (let i of this.categories) {\r\n        if (label === i.name) {\r\n          this.activeCategories = i;\r\n        }\r\n      }\r\n    },\r\n    handleAddCartData(e) {\r\n      this.loadImg();\r\n      //获取被点击的dom元素位置,小球动画开始\r\n      const el = e.target;\r\n      if (el.className === \"cubeic-add\") {\r\n        this.ballAnimation(el);\r\n        let name = el.getAttribute(\"name\");\r\n        let imgUrl = el.getAttribute(\"imgUrl\");\r\n        let price = el.getAttribute(\"price\");\r\n        this.addCartData({\r\n          name: name,\r\n          img: imgUrl,\r\n          count: 1,\r\n          price: price\r\n        });\r\n      }\r\n    },\r\n    loadImg() {\r\n      // reset better-scroll'postion\r\n      this.$refs.scroll.scrollTo(0, 0);\r\n      // you need to caculate scroll-content height when your dom has changed in nextTick\r\n      this.$refs.scroll.refresh();\r\n    },\r\n    ballAnimation(el) {\r\n      //获取小球起点终点\r\n      let { top, left } = el.getBoundingClientRect();\r\n      let endTop = this.shopCartPosition.top - top,\r\n        endLeft = this.shopCartPosition.left - left + 40;\r\n      let _this = this;\r\n      //遍历小球\r\n      this.$nextTick(function() {\r\n        for (let i = 0; i < this.balls.length; i++) {\r\n          if (!this.balls[i].show) {\r\n            //将小球放到起点位置\r\n            this.balls[i].show = true;\r\n            this.$refs.balls[i].style.top = top + \"px\";\r\n            this.$refs.balls[i].style.left = left + \"px\";\r\n            //小球移动到终点位置\r\n            setTimeout(function() {\r\n              _this.$refs.balls[\r\n                i\r\n              ].style.transform = `translate3d(${endLeft}px, ${endTop}px, 0)`;\r\n              setTimeout(function() {\r\n                _this.balls[i].show = false;\r\n                //小球回到起点位置\r\n                _this.$refs.balls[i].style.transform = `translate3d(0, 0, 0)`;\r\n              }, 600);\r\n            });\r\n\r\n            return;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  },\r\n  activated() {\r\n    this.loadImg();\r\n  }\r\n};\r\n",{"version":3,"sources":["Categories.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Categories.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"categories-container\">\r\n      <div class=\"left-scroll-bar\">\r\n        <cube-scroll class=\"left-scroll\">\r\n          <cube-tab-bar\r\n            v-model=\"selectedLabelDefault\"\r\n            :data=\"categories\"\r\n            @click=\"clickHandler\"\r\n            @change=\"changeHandler\"\r\n          >\r\n            <cube-tab\r\n              v-for=\"(item, index) of categories\"\r\n              :label=\"item.name\"\r\n              :key=\"index\"\r\n            >\r\n              {{ item.name }}\r\n            </cube-tab>\r\n          </cube-tab-bar>\r\n        </cube-scroll>\r\n      </div>\r\n      <div class=\"right-scroll-bar\">\r\n        <cube-scroll class=\"right-scroll\" ref=\"scroll\">\r\n          <ul class=\"right-scroll-ul\" @click=\"handleAddCartData($event)\">\r\n            <li\r\n              class=\"right-scroll-li\"\r\n              v-for=\"(item, index) of activeCategories.data\"\r\n              :key=\"index\"\r\n            >\r\n              <img\r\n                class=\"goodsImg\"\r\n                :src=\"item.imgUrl\"\r\n                alt=\"\"\r\n                @load.once=\"loadImg\"\r\n              />\r\n              <span class=\"goodsName\"\r\n                >{{ item.name }}\r\n                <i\r\n                  class=\"cubeic-add\"\r\n                  :name=\"item.name\"\r\n                  :imgUrl=\"item.imgUrl\"\r\n                  :price=\"item.price\"\r\n                ></i\r\n              ></span>\r\n              <span class=\"goodsPrice\">￥{{ item.price }} </span>\r\n            </li>\r\n          </ul>\r\n        </cube-scroll>\r\n      </div>\r\n    </div>\r\n    <navbar></navbar>\r\n    <div\r\n      class=\"balls\"\r\n      v-for=\"(ball, index) of balls\"\r\n      :key=\"index\"\r\n      ref=\"balls\"\r\n      v-show=\"ball.show\"\r\n    ></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from \"@/components/Navbar\";\r\nimport { mapState, mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"Categories\",\r\n  data() {\r\n    return {\r\n      categories: [],\r\n      selectedLabelDefault: \"热门推荐\",\r\n      activeCategories: {},\r\n      balls: [\r\n        { show: false },\r\n        { show: false },\r\n        { show: false },\r\n        { show: false },\r\n        { show: false }\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"shopCartPosition\"])\r\n  },\r\n  components: {\r\n    Navbar\r\n  },\r\n  created() {\r\n    //获取分类页数据\r\n    this.axios({\r\n      method: \"get\",\r\n      url:\r\n        \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/categories\"\r\n    }).then(res => {\r\n      if (res.data.success) {\r\n        this.categories = res.data.data;\r\n        console.log(res.data.data);\r\n        this.activeCategories = this.categories[0];\r\n      } else {\r\n        console.log(\"请求数据失败，请重新请求！\");\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    ...mapActions([\"addCartData\", \"handleOnceRequest\"]),\r\n    clickHandler(label) {\r\n      // if you clicked home tab, then print 'Home'\r\n      console.log(label);\r\n    },\r\n    changeHandler(label) {\r\n      this.loadImg();\r\n      // if you clicked different tab, this methods can be emitted\r\n      for (let i of this.categories) {\r\n        if (label === i.name) {\r\n          this.activeCategories = i;\r\n        }\r\n      }\r\n    },\r\n    handleAddCartData(e) {\r\n      this.loadImg();\r\n      //获取被点击的dom元素位置,小球动画开始\r\n      const el = e.target;\r\n      if (el.className === \"cubeic-add\") {\r\n        this.ballAnimation(el);\r\n        let name = el.getAttribute(\"name\");\r\n        let imgUrl = el.getAttribute(\"imgUrl\");\r\n        let price = el.getAttribute(\"price\");\r\n        this.addCartData({\r\n          name: name,\r\n          img: imgUrl,\r\n          count: 1,\r\n          price: price\r\n        });\r\n      }\r\n    },\r\n    loadImg() {\r\n      // reset better-scroll'postion\r\n      this.$refs.scroll.scrollTo(0, 0);\r\n      // you need to caculate scroll-content height when your dom has changed in nextTick\r\n      this.$refs.scroll.refresh();\r\n    },\r\n    ballAnimation(el) {\r\n      //获取小球起点终点\r\n      let { top, left } = el.getBoundingClientRect();\r\n      let endTop = this.shopCartPosition.top - top,\r\n        endLeft = this.shopCartPosition.left - left + 40;\r\n      let _this = this;\r\n      //遍历小球\r\n      this.$nextTick(function() {\r\n        for (let i = 0; i < this.balls.length; i++) {\r\n          if (!this.balls[i].show) {\r\n            //将小球放到起点位置\r\n            this.balls[i].show = true;\r\n            this.$refs.balls[i].style.top = top + \"px\";\r\n            this.$refs.balls[i].style.left = left + \"px\";\r\n            //小球移动到终点位置\r\n            setTimeout(function() {\r\n              _this.$refs.balls[\r\n                i\r\n              ].style.transform = `translate3d(${endLeft}px, ${endTop}px, 0)`;\r\n              setTimeout(function() {\r\n                _this.balls[i].show = false;\r\n                //小球回到起点位置\r\n                _this.$refs.balls[i].style.transform = `translate3d(0, 0, 0)`;\r\n              }, 600);\r\n            });\r\n\r\n            return;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  },\r\n  activated() {\r\n    this.loadImg();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.balls\r\n  position absolute\r\n  bottom 20px\r\n  right 35%\r\n  width 20px\r\n  height 20px\r\n  border-radius 50%\r\n  background orange\r\n  z-index 1000\r\n  transition: transform .6s cubic-bezier(0.49, -0.29, 0.75, 0.41)\r\n.categories-container\r\n  display flex\r\n  .right-scroll-bar\r\n    height 80vh\r\n    width 70%\r\n    .right-scroll\r\n      .right-scroll-ul\r\n        display flex\r\n        flex-wrap wrap\r\n        justify-content space-between\r\n        padding 10px 20px\r\n        box-sizing border-box\r\n        .right-scroll-li\r\n          display flex\r\n          flex-direction column\r\n          max-width 45%\r\n          overflow hidden\r\n          margin-bottom 15px\r\n          .goodsImg\r\n            padding-bottom 10px\r\n          .goodsName\r\n            padding-bottom 5px\r\n            padding-left 10px\r\n            font-size 18px\r\n            .cubeic-add\r\n              font-size 22px\r\n              color orange\r\n          .goodsPrice\r\n            font-size 16px\r\n            padding-left 10px\r\n  .left-scroll-bar\r\n    height 80vh\r\n    width 30%\r\n    background-color #f8f8f8\r\n    .left-scroll\r\n      .cube-tab-bar\r\n        display flex\r\n        flex-wrap wrap\r\n        flex-direction column\r\n        .cube-tab\r\n          width 100%\r\n          display flex\r\n          justify-content center\r\n          align-items center\r\n          padding 15px 0\r\n          box-sizing border-box\r\n          font-size 14px\r\n</style>\r\n"]}]}