{"remainingRequest":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\SignUp.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\SignUp.vue","mtime":1561934487994},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1557153102750},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\babel-loader\\lib\\index.js","mtime":1557153093181},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js","mtime":1557153103023}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport qs from \"qs\";\r\nexport default {\r\n  name: \"SignUp\",\r\n  data() {\r\n    return {\r\n      model: {\r\n        username: \"\",\r\n        password: \"\",\r\n        confirmPassword: \"\"\r\n      },\r\n      schema: {\r\n        fields: [\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"username\",\r\n            label: \"用户名\",\r\n            props: {\r\n              placeholder: \"请输入用户名\",\r\n              type: \"username\"\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"用户名不能为空!\",\r\n              min: \"用户名不能少于3个字符！\",\r\n              max: \"用户名不能大于15个字符！\"\r\n            }\r\n          },\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"password\",\r\n            label: \"密码\",\r\n            props: {\r\n              placeholder: \"请输入密码\",\r\n              type: \"password\",\r\n              eye: {\r\n                open: false\r\n              }\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"密码不能为空\",\r\n              min: \"密码不能少于3个字符\",\r\n              max: \"密码不能大于15个字符\"\r\n            }\r\n          },\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"confirmPassword\",\r\n            label: \"确认密码\",\r\n            props: {\r\n              placeholder: \"请确认密码\",\r\n              type: \"password\",\r\n              eye: {\r\n                open: false\r\n              }\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"密码不能为空\",\r\n              min: \"密码不能少于3个字符\",\r\n              max: \"密码不能大于15个字符\"\r\n            }\r\n          },\r\n          {\r\n            type: \"submit\",\r\n            label: \"注册\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    submitHandler(e) {\r\n      e.preventDefault();\r\n      if (this.model.password !== this.model.confirmPassword) {\r\n        this.showPopup(\"myPopup\");\r\n        return;\r\n      }\r\n      const data = {\r\n        username: this.model.username,\r\n        password: this.model.password\r\n      };\r\n      this.axios({\r\n        method: \"post\",\r\n        url:\r\n          \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/signup\",\r\n        data: qs.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n        }\r\n      })\r\n        .then(res => {\r\n          if (res.data.data.signUp.code === 1) {\r\n            this.showPopup(\"usernameExit\");\r\n          } else if (res.data.data.signUp.code === 0) {\r\n            let token = res.data.data.signUp.token;\r\n            this.$store.dispatch({\r\n              type: \"setTokenAction\",\r\n              token: token\r\n            });\r\n            this.$router.push(\"/my\");\r\n\r\n            //判断路由是否带参数，如果带参，跳到带参的路由\r\n            /*            if (this.$route.query.redirect) {\r\n              this.$router.replace(`${this.$route.query.redirect}`);\r\n            } else {\r\n              this.$router.replace(\"/\");\r\n            }*/\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    showPopup(refId) {\r\n      const component = this.$refs[refId];\r\n      component.show();\r\n      setTimeout(() => {\r\n        component.hide();\r\n      }, 1000);\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["SignUp.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignUp.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h6 class=\"signUp\">注册</h6>\r\n    <cube-form\r\n      :model=\"model\"\r\n      :schema=\"schema\"\r\n      @submit=\"submitHandler\"\r\n    ></cube-form>\r\n    <div class=\"signIn\">\r\n      <router-link class=\"toSignIn\" to=\"/signin\" tag=\"a\"\r\n        >已有账号？</router-link\r\n      >\r\n    </div>\r\n    <cube-popup type=\"my-popup\" ref=\"myPopup\" :mask=\"false\">\r\n      密码输入不相同，请重新输入！\r\n    </cube-popup>\r\n    <cube-popup type=\"my-popup\" ref=\"usernameExit\" :mask=\"false\">\r\n      用户名已存在，请重新注册！\r\n    </cube-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\nexport default {\r\n  name: \"SignUp\",\r\n  data() {\r\n    return {\r\n      model: {\r\n        username: \"\",\r\n        password: \"\",\r\n        confirmPassword: \"\"\r\n      },\r\n      schema: {\r\n        fields: [\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"username\",\r\n            label: \"用户名\",\r\n            props: {\r\n              placeholder: \"请输入用户名\",\r\n              type: \"username\"\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"用户名不能为空!\",\r\n              min: \"用户名不能少于3个字符！\",\r\n              max: \"用户名不能大于15个字符！\"\r\n            }\r\n          },\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"password\",\r\n            label: \"密码\",\r\n            props: {\r\n              placeholder: \"请输入密码\",\r\n              type: \"password\",\r\n              eye: {\r\n                open: false\r\n              }\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"密码不能为空\",\r\n              min: \"密码不能少于3个字符\",\r\n              max: \"密码不能大于15个字符\"\r\n            }\r\n          },\r\n          {\r\n            type: \"input\",\r\n            modelKey: \"confirmPassword\",\r\n            label: \"确认密码\",\r\n            props: {\r\n              placeholder: \"请确认密码\",\r\n              type: \"password\",\r\n              eye: {\r\n                open: false\r\n              }\r\n            },\r\n            rules: {\r\n              required: true,\r\n              type: \"string\",\r\n              min: 3,\r\n              max: 15\r\n            },\r\n            trigger: \"blur\",\r\n            messages: {\r\n              required: \"密码不能为空\",\r\n              min: \"密码不能少于3个字符\",\r\n              max: \"密码不能大于15个字符\"\r\n            }\r\n          },\r\n          {\r\n            type: \"submit\",\r\n            label: \"注册\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    submitHandler(e) {\r\n      e.preventDefault();\r\n      if (this.model.password !== this.model.confirmPassword) {\r\n        this.showPopup(\"myPopup\");\r\n        return;\r\n      }\r\n      const data = {\r\n        username: this.model.username,\r\n        password: this.model.password\r\n      };\r\n      this.axios({\r\n        method: \"post\",\r\n        url:\r\n          \"https://www.easy-mock.com/mock/5cdda667431f897675a3d7bf/jx/signup\",\r\n        data: qs.stringify(data),\r\n        headers: {\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n        }\r\n      })\r\n        .then(res => {\r\n          if (res.data.data.signUp.code === 1) {\r\n            this.showPopup(\"usernameExit\");\r\n          } else if (res.data.data.signUp.code === 0) {\r\n            let token = res.data.data.signUp.token;\r\n            this.$store.dispatch({\r\n              type: \"setTokenAction\",\r\n              token: token\r\n            });\r\n            this.$router.push(\"/my\");\r\n\r\n            //判断路由是否带参数，如果带参，跳到带参的路由\r\n            /*            if (this.$route.query.redirect) {\r\n              this.$router.replace(`${this.$route.query.redirect}`);\r\n            } else {\r\n              this.$router.replace(\"/\");\r\n            }*/\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    showPopup(refId) {\r\n      const component = this.$refs[refId];\r\n      component.show();\r\n      setTimeout(() => {\r\n        component.hide();\r\n      }, 1000);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n>>> .cube-popup-content\r\n  padding 20px\r\n  color #fff\r\n  font-size 24px\r\n  background-color rgba(0,0,0,.8)\r\n>>> .cube-btn\r\n  background orange\r\n.container >>> .cube-my-popup\r\n  text-align center\r\n\r\n.signUp\r\n  font-size 20px\r\n  display flex\r\n  justify-content center\r\n  align-items center\r\n  color orange\r\n  background #f8f8f8\r\n  padding 10px\r\n.signIn\r\n  display flex\r\n  width 100%\r\n  margin-top 10px\r\n  .toSignIn\r\n    margin-left 15px\r\n    font-size 12px\r\n    text-decoration underline\r\n</style>\r\n"]}]}