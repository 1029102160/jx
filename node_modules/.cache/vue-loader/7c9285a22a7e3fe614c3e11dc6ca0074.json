{"remainingRequest":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\ShoppingCart.vue?vue&type=style&index=0&id=0a4f6c3c&lang=stylus&scoped=true&","dependencies":[{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\src\\views\\ShoppingCart.vue","mtime":1562006117825},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\css-loader\\index.js","mtime":1557153102259},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1557153103023},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\postcss-loader\\src\\index.js","mtime":1557153102648},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\stylus-loader\\index.js","mtime":1557153130038},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1557153102075},{"path":"C:\\Users\\金龙\\WebstormProjects\\jx\\node_modules\\vue-loader\\lib\\index.js","mtime":1557153103023}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.cart\n  height 60vh\n  .cart-ul\n    .cart-li\n      padding 10px\n      .cart-li-list\n        .list-top\n          width 100%\n          display flex\n          align-items center\n          justify-content space-between\n          .list-left\n            display flex\n            align-items center\n            .input-checkbox\n              zoom: 180%\n              margin 0 10px 0 0\n            .list-left-bar\n              display flex\n              justify-content center\n              align-items center\n              flex-direction column\n              .list-left-img\n                width 100px\n                height 100px\n              .goodsName\n                text-align center\n                font-size 14px\n                padding 10px\n                box-sizing border-box\n                width 100px\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space:nowrap;\n          .list-right\n             display flex\n             justify-content center\n             align-items center\n             .reduce, .add\n              text-align center\n              font-size 30px\n              padding 10px 20px\n             .reset\n              font-size 14px\n              width 30px\n              border 1px solid black\n              border-radius initial\n              padding 10px 2px\n              text-align center\n              outline none\n              -webkit-appearance none\n        .list-bottom\n          display flex\n          align-items center\n          padding 0 0 10px 0\n          margin-left 40px\n          .price-count\n            font-size 14px\n            .price-count-item\n              font-size 16px\n          .singlePrice\n            font-size 16px\nfooter\n  position fixed\n  left 0\n  bottom 55px\n  .allChecked\n    width 100vw\n    min-height 40px\n    display flex\n    justify-content space-between\n    align-items center\n    .allChecked-left\n      display flex\n      align-items center\n      .allChecked-left-name\n        font-size 14px\n        padding 10px\n      .allCheck\n        zoom 180%\n    .allChecked-right\n      margin-right 20px\n      font-size 14px\n      .total\n        font-size 16px\n  .clearAndPay\n    display flex\n    justify-content space-between\n    align-items center\n    padding 10px 20px\n    .clearCartData, .pay\n      width 30vw\n      justify-content center\n      align-items center\n      background orange\n      font-size 14px\n",{"version":3,"sources":["ShoppingCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShoppingCart.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"shoppingCart-container\">\r\n    <div class=\"cart\">\r\n      <cube-scroll ref=\"scroll\">\r\n        <ul class=\"cart-ul\" ref=\"cartUl\">\r\n          <li class=\"cart-li\" v-for=\"(item, index) of curCartData\" :key=\"index\">\r\n            <div class=\"cart-li-list\">\r\n              <div class=\"list-top\">\r\n                <div class=\"list-left\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    class=\"input-checkbox\"\r\n                    @change=\"handleTotalPrice\"\r\n                  />\r\n                  <div class=\"list-left-bar\">\r\n                    <img :src=\"item.img\" class=\"list-left-img\" />\r\n                    <span class=\"goodsName\">{{ item.name }}</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"list-right\">\r\n                  <span @click=\"handleReduceCartData(item)\" class=\"reduce\"\r\n                    >-</span\r\n                  >\r\n                  <input\r\n                    class=\"reset\"\r\n                    type=\"text\"\r\n                    v-model.trim.number.lazy=\"item.count\"\r\n                    @blur=\"throttle(item)\"\r\n                  />\r\n                  <span @click=\"handleAddCartData(item)\" class=\"add\">+</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"list-bottom\">\r\n                <span class=\"price-count\"\r\n                  ><span class=\"price-count-item\">￥</span>{{ item.price }} ×\r\n                  {{ item.count }} =&nbsp;&nbsp;</span\r\n                >\r\n                <span\r\n                  v-text=\"(item.price * item.count).toFixed(2)\"\r\n                  class=\"singlePrice\"\r\n                ></span>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </cube-scroll>\r\n    </div>\r\n    <footer>\r\n      <div class=\"allChecked\">\r\n        <div class=\"allChecked-left\">\r\n          <span class=\"allChecked-left-name\">全选</span>\r\n          <input\r\n            type=\"checkbox\"\r\n            @change=\"handleAllCheck\"\r\n            ref=\"allCheck\"\r\n            class=\"allCheck\"\r\n          />\r\n        </div>\r\n        <div class=\"allChecked-right\">\r\n          <span class=\"total\">合计：</span>{{ totalPrice }}\r\n        </div>\r\n      </div>\r\n      <div class=\"clearAndPay\">\r\n        <cube-button class=\"clearCartData\" @click=\"clear\"\r\n          >清空购物车</cube-button\r\n        >\r\n        <cube-button @click=\"pay\" class=\"pay\">支付</cube-button>\r\n      </div>\r\n    </footer>\r\n    <navbar></navbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from \"@/components/Navbar\";\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"ShoppingCart\",\r\n  data() {\r\n    return {\r\n      allCheck: false,\r\n      price: 0,\r\n      totalPrice: 0\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"curCartData\"])\r\n  },\r\n  components: {\r\n    Navbar\r\n  },\r\n  methods: {\r\n    scrollTo() {\r\n      this.$nextTick(() => {\r\n        // reset better-scroll'postion\r\n        this.$refs.scroll.scrollTo(0, 0);\r\n        // you need to caculate scroll-content height when your dom has changed in nextTick\r\n        this.$refs.scroll.refresh();\r\n      });\r\n    },\r\n    ...mapActions([\r\n      \"reduceCartData\",\r\n      \"addCartData\",\r\n      \"clearCartData\",\r\n      \"resetCartData\"\r\n    ]),\r\n    async handleReduceCartData(item) {\r\n      await this.reduceCartData(item);\r\n      this.handleTotalPrice();\r\n    },\r\n    async handleAddCartData(item) {\r\n      await this.addCartData(item);\r\n      this.handleTotalPrice();\r\n    },\r\n    async handleClearCartData(item) {\r\n      await this.clearCartData(item);\r\n      this.handleTotalPrice();\r\n    },\r\n    async handleResetCartData(item) {\r\n      await this.resetCartData(item);\r\n      this.handleTotalPrice();\r\n    },\r\n    pay() {\r\n      this.$createDialog({\r\n        type: \"confirm\",\r\n        icon: \"cubeic-alert\",\r\n        title: \"确认支付？\",\r\n        content: \"\",\r\n        confirmBtn: {\r\n          text: \"确定按钮\",\r\n          active: true,\r\n          disabled: false,\r\n          href: \"javascript:;\"\r\n        },\r\n        cancelBtn: {\r\n          text: \"取消按钮\",\r\n          active: false,\r\n          disabled: false,\r\n          href: \"javascript:;\"\r\n        },\r\n        onConfirm: () => {\r\n          this.$createToast({\r\n            type: \"warn\",\r\n            time: 1000,\r\n            txt: \"支付成功！\"\r\n          }).show();\r\n          this.handlePay();\r\n        },\r\n        onCancel: () => {\r\n          this.$createToast({\r\n            type: \"warn\",\r\n            time: 1000,\r\n            txt: \"取消支付！\"\r\n          }).show();\r\n        }\r\n      }).show();\r\n    },\r\n    clear() {\r\n      this.$createDialog({\r\n        type: \"confirm\",\r\n        icon: \"cubeic-alert\",\r\n        title: \"确定清空购物车？\",\r\n        content: \"\",\r\n        confirmBtn: {\r\n          text: \"确定按钮\",\r\n          active: true,\r\n          disabled: false,\r\n          href: \"javascript:;\"\r\n        },\r\n        cancelBtn: {\r\n          text: \"取消按钮\",\r\n          active: false,\r\n          disabled: false,\r\n          href: \"javascript:;\"\r\n        },\r\n        onConfirm: () => {\r\n          this.$createToast({\r\n            type: \"warn\",\r\n            time: 1000,\r\n            txt: \"购物车已清空！\"\r\n          }).show();\r\n          this.handleClearCartData();\r\n        },\r\n        onCancel: () => {\r\n          this.$createToast({\r\n            type: \"warn\",\r\n            time: 1000,\r\n            txt: \"取消清空！\"\r\n          }).show();\r\n        }\r\n      }).show();\r\n    },\r\n    throttle(item) {\r\n      let status = true;\r\n      let _this = this;\r\n      if (status) {\r\n        status = false;\r\n        setTimeout(function() {\r\n          _this.handleResetCartData(item);\r\n          status = true;\r\n        }, 200);\r\n      }\r\n    },\r\n    handleTotalPrice() {\r\n      let startPrice = 0;\r\n      let inputs = this.$refs.cartUl.getElementsByClassName(\"input-checkbox\");\r\n      for (let input of inputs) {\r\n        if (input.checked) {\r\n          startPrice += parseFloat(\r\n            input.parentNode.parentNode.parentNode.querySelectorAll(\r\n              \".singlePrice\"\r\n            )[0].innerText\r\n          );\r\n        }\r\n      }\r\n      this.totalPrice = startPrice.toFixed(2);\r\n    },\r\n    handleAllCheck() {\r\n      let inputs = this.$refs.cartUl.getElementsByClassName(\"input-checkbox\");\r\n      if (this.$refs.allCheck.checked) {\r\n        for (let input of inputs) {\r\n          input.checked = true;\r\n        }\r\n      } else {\r\n        for (let input of inputs) {\r\n          input.checked = false;\r\n        }\r\n      }\r\n      this.handleTotalPrice();\r\n    },\r\n    handlePay() {\r\n      let inputs = this.$refs.cartUl.querySelectorAll(\".input-checkbox\");\r\n      for (let input of inputs) {\r\n        if (input.checked) {\r\n          let name = input.parentNode.querySelectorAll(\".goodsName\")[0]\r\n            .innerText;\r\n          let item = {};\r\n          item.name = name;\r\n          item.pay = true;\r\n          this.handleReduceCartData(item);\r\n        }\r\n      }\r\n\r\n      for (let input of inputs) {\r\n        input.checked = false;\r\n      }\r\n    }\r\n  },\r\n  mounted() {},\r\n  deactivated() {\r\n    this.scrollTo();\r\n  },\r\n  activated() {\r\n    this.scrollTo();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  .cart\r\n    height 60vh\r\n    .cart-ul\r\n      .cart-li\r\n        padding 10px\r\n        .cart-li-list\r\n          .list-top\r\n            width 100%\r\n            display flex\r\n            align-items center\r\n            justify-content space-between\r\n            .list-left\r\n              display flex\r\n              align-items center\r\n              .input-checkbox\r\n                zoom: 180%\r\n                margin 0 10px 0 0\r\n              .list-left-bar\r\n                display flex\r\n                justify-content center\r\n                align-items center\r\n                flex-direction column\r\n                .list-left-img\r\n                  width 100px\r\n                  height 100px\r\n                .goodsName\r\n                  text-align center\r\n                  font-size 14px\r\n                  padding 10px\r\n                  box-sizing border-box\r\n                  width 100px\r\n                  overflow: hidden;\r\n                  text-overflow: ellipsis;\r\n                  white-space:nowrap;\r\n            .list-right\r\n               display flex\r\n               justify-content center\r\n               align-items center\r\n               .reduce, .add\r\n                text-align center\r\n                font-size 30px\r\n                padding 10px 20px\r\n               .reset\r\n                font-size 14px\r\n                width 30px\r\n                border 1px solid black\r\n                border-radius initial\r\n                padding 10px 2px\r\n                text-align center\r\n                outline none\r\n                -webkit-appearance none\r\n          .list-bottom\r\n            display flex\r\n            align-items center\r\n            padding 0 0 10px 0\r\n            margin-left 40px\r\n            .price-count\r\n              font-size 14px\r\n              .price-count-item\r\n                font-size 16px\r\n            .singlePrice\r\n              font-size 16px\r\n  footer\r\n    position fixed\r\n    left 0\r\n    bottom 55px\r\n    .allChecked\r\n      width 100vw\r\n      min-height 40px\r\n      display flex\r\n      justify-content space-between\r\n      align-items center\r\n      .allChecked-left\r\n        display flex\r\n        align-items center\r\n        .allChecked-left-name\r\n          font-size 14px\r\n          padding 10px\r\n        .allCheck\r\n          zoom 180%\r\n      .allChecked-right\r\n        margin-right 20px\r\n        font-size 14px\r\n        .total\r\n          font-size 16px\r\n    .clearAndPay\r\n      display flex\r\n      justify-content space-between\r\n      align-items center\r\n      padding 10px 20px\r\n      .clearCartData, .pay\r\n        width 30vw\r\n        justify-content center\r\n        align-items center\r\n        background orange\r\n        font-size 14px\r\n</style>\r\n"]}]}